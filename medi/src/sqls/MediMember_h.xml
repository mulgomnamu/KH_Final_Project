<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="MediMember_h">

	<insert id="addMember_h" parameterType="kh.com.medi.model.MediMember_hDto">
		INSERT INTO `medi`.`medi_hospital` (`id`, `pwd`, `name`, `tel`, `post`, `address`, `latitude`, `longtitude`, `email`, `question`, `answer`, `confirm_img`, `info`, `score`, `del`, `regdate`, `auth`) 
		VALUES (#{id}, #{pwd}, #{name}, #{tel}, #{post}, #{address}, 'latitude', 'longtitude', #{email}, #{question}, #{answer}, #{confirm_img}, #{info}, 0, 1, now(), 3)
	</insert>

	<insert id="addImage" parameterType="kh.com.medi.model.MediHospital_imageDto">
		INSERT INTO `medi`.`medi_image` (`hos_seq`, `image`)
		VALUES (#{hos_seq}, #{image})
	</insert>
	
	<insert id="addSubject" parameterType="kh.com.medi.model.MediHospital_subject">
		INSERT INTO `medi`.`medi_subject` (`hos_seq`, `subject`)
		VALUES (#{hos_seq}, #{subject})
	</insert>
	
	<select id="getHospitalColumn" parameterType="java.lang.String" resultType="kh.com.medi.model.MediMember_hDto">
		SELECT `seq`, `id`, `pwd`, `name`, `tel`, `post`, `address`, `latitude`, `longtitude`, `email`, `question`, `answer`, `confirm_img`, `info`, `del`, `regdate`, `auth`
		FROM `MEDI`.`MEDI_HOSPITAL`
		WHERE `id`=#{id}
	</select>
	
	<select id="checkId_h" parameterType="kh.com.medi.model.MediMember_hDto" resultType="java.lang.Integer">
		SELECT IFNULL(COUNT(*), 0)
		FROM `MEDI`.`MEDI_HOSPITAL`
		WHERE ID=#{id}
	</select>
	
	<update id="updateMember_h" parameterType="kh.com.medi.model.MediMember_hDto">
		UPDATE `medi`.`medi_hospital`
		SET `pwd`=#{pwd} AND `name`=#{name} AND `tel`=#{tel} AND `address`=#{address} AND email=#{email} AND `info`=${info}
		WHERE `seq`=#{seq}
	</update>
	
	<update id="deleteMember_h" parameterType="kh.com.medi.model.MediMember_hDto">
		UPDATE `medi`.`medi_hospital`
		SET `del`=0
		WHERE `seq`=#{seq}
	</update>
	
	<select id="loginCheck" parameterType="kh.com.medi.model.MediMember_hDto" resultType="kh.com.medi.model.MediMember_hDto">
		SELECT `seq`, `id`, `pwd`, `name`, `tel`, `post`, `address`, `latitude`, `longtitude`, `email`, `question`, `answer`, `confirm_img`, `info`, `del`, `regdate`, `auth`
		FROM `MEDI`.`MEDI_HOSPITAL`
		WHERE `id`=#{id} AND `pwd`=#{pwd}
	</select>
	
	<update id="changePwd" parameterType="kh.com.medi.model.MediMember_hDto">
		UPDATE `medi`.`medi_hospital`
		SET `pwd`=#{pwd1}
		WHERE `id`=#{id}
	</update>

</mapper>