<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="MediMyPage">

<select id="mydetail"
parameterType="kh.com.medi.model.MediMemberDto"
resultType="kh.com.medi.model.MediMemberDto">
	SELECT SEQ,ID, PWD, NAME, EMAIL, PHONE, 
	POST, ADDRESS, AUTH, DEL, MYIMG, BLACKLIST,REGDATE,QUESTION,ANSWER
	FROM medi_member
	WHERE ID=#{id}
</select>

<update id="myupdate" parameterType="hashmap">
UPDATE medi_member SET 
PWD=#{pwd}, EMAIL=#{email},POST=#{post},ADDRESS=#{address}
WHERE ID=#{id}
</update>

<update id="mydelete" parameterType="kh.com.medi.model.MediMemberDto">
	UPDATE medi_member
	SET DEL=1
	WHERE ID=#{id}
</update>

<!--중요하네-->
<select parameterType="kh.com.medi.model.MediMemberDto" id="myup" resultType="kh.com.medi.model.MediMemberDto">
		SELECT SEQ, ID, PWD, NAME, EMAIL, PHONE, POST, ADDRESS, QUESTION, ANSWER, AUTH, DEL, MYIMG, BLACKLIST, REGDATE
		FROM medi_member 
		WHERE ID=#{id} AND PWD=sha1(md5(#{pwd})) 
</select>

<!--비밀번호 수정  -->
<update id="mypwdupdateAf" parameterType="hashmap">
UPDATE medi_member SET PWD=#{pwd}
WHERE PWD=#{pwd}
</update>

</mapper>